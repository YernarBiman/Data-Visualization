<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    table,
    td {
        margin: 20px;
        border: 1px solid #333;
    }

    thead,
    tfoot {
        background-color: #333;
        color: #fff;
    }

</style>
<body>
    <div id="my_dataviz"></div>
    <div id="my_dataviz2"></div>

    <table>
        <tbody>
            <tr>
                <td></td>
                <td>Intra_TSNE</td>
                <td>Intre_TSNE</td>
            </tr>
            <tr>
                <td>1</td>
                <td id="d11"></td>
                <td id="d12"></td>
            </tr>
            <tr>
                <td>2</td>
                <td id="d21"></td>
                <td id="d22"></td>
            </tr>
            <tr>
                <td>3</td>
                <td id="d31"></td>
                <td id="d32"></td>
            </tr>
            <tr>
                <td>Average</td>
                <td id="d41"></td>
                <td id="d42"></td>
            </tr>
        </tbody>
    </table>

    <table>
        <tbody>
            <tr>
                <td></td>
                <td>Intra_UMAP</td>
                <td>Intre_UMAP</td>
            </tr>
            <tr>
                <td>1</td>
                <td id="u11"></td>
                <td id="u12"></td>
            </tr>
            <tr>
                <td>2</td>
                <td id="u21"></td>
                <td id="u22"></td>
            </tr>
            <tr>
                <td>3</td>
                <td id="u31"></td>
                <td id="u32"></td>
            </tr>
            <tr>
                <td>Average</td>
                <td id="u41"></td>
                <td id="u42"></td>
            </tr>
        </tbody>
    </table>

    <table class="last">
        <tbody>
            <tr>
                <td></td>
                <td>Percentage difference</td>
                <td>min & max</td>
            </tr>
            <tr>
                <td>1</td>
                <td id="z11"></td>
                <td id="z12"></td>
            </tr>
            <tr>
                <td>2</td>
                <td id="z21"></td>
                <td id="z22"></td>
            </tr>
        </tbody>
    </table>

    <div style="height: 500px; border: #333333 2px solid; width: 100%; margin: 20px">
        In order to cluster be good, Intercluster distance between different clusters need to be more, while Intracluster distance of same cluster is less. As Intercuster Distance I have used Average Centroid Linkage Distance, whereas for Intracuster Distance, I have used Centroid Diameter Distance. As we can see from table TSNE algorithm has higher intrecluster distance 23.38, while UMAP algorithm has lower intracluster distance 2.94. As two algorithms have its own advantages, I have found percentage difference between. So I can conclude UMAP algorithm is better as it has more percentage benefit than TSNE.
    </div>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script type="module">


        class Calc {

            constructor(zero_l, one_l, two_l) {
                this.zero_l = zero_l
                this.one_l = one_l
                this.two_l = two_l
            }

            vter() {
                this.v_z = this.vt(this.zero_l)
                this.v_o = this.vt(this.one_l)
                this.v_t = this.vt(this.two_l)
            }
            outter() {
                this.out1 = this.centroid(this.zero_l, this.one_l, this.v_z, this.v_o)
                this.out2 = this.centroid(this.one_l, this.two_l, this.v_o, this.v_t)
                this.out3 = this.centroid(this.zero_l, this.two_l, this.v_z, this.v_t)
                this.intre_tsne = []
                this.intre_tsne.push(this.out1)
                this.intre_tsne.push(this.out2)
                this.intre_tsne.push(this.out3)
            }
            intrer() {
                this.intra1 = this.centroid_intra(this.zero_l, this.v_z)
                this.intra2 = this.centroid_intra(this.one_l, this.v_o)
                this.intra3 = this.centroid_intra(this.two_l, this.v_t)
                this.intra_tsne = []
                this.intra_tsne.push(this.intra1)
                this.intra_tsne.push(this.intra2)
                this.intra_tsne.push(this.intra3)
            }



            vt(array) {
                let vt_zero_x = 0
                let vt_zero_y = 0
                for (let i = 0; i < array.length; i++) {
                    vt_zero_x = vt_zero_x + array[i][0]
                    vt_zero_y = vt_zero_y + array[i][1]
                }
                vt_zero_x = vt_zero_x / array.length
                vt_zero_y = vt_zero_y / array.length
                return [vt_zero_x, vt_zero_y]
            }

            eucDistance(a, b) {
                return a
                    .map((x, i) => Math.abs(x - b[i]) ** 2) // square the difference
                    .reduce((sum, now) => sum + now) // sum
                    ** (1 / 2)
            }
            centroid(a, b, va, vb) {
                let a1 = 0
                let b1 = 0
                for (let i = 0; i < a.length; i++) {
                    a1 = a1 + this.eucDistance([a[i][0], a[i][1]], vb)
                    b1 = b1 + this.eucDistance([b[i][0], b[i][1]], va)
                }
                let summ = a1 + b1
                return summ / (a.length + b.length)
            }

            centroid_intra(a, va) {
                let a1 = 0
                for (let i = 0; i < a.length; i++) {
                    a1 = a1 + this.eucDistance([a[i][0], a[i][1]], va)
                }
                return (2 * a1) / (a.length)
            }


        }

        var margin = { top: 30, right: 30, bottom: 30, left: 60 },
            width = 460 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;

        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        var svg2 = d3.select("#my_dataviz2")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");
            


        //Read the data
        let calc, calc_umap

        let data = [
            [-0.41550354787181004, 20.41718795000703, 0.0],
            [2.099825706176195, 21.720649599055612, 0.0], [2.080517233512922, 20.532873387646656, 0.0], [2.5020255694365976, 20.98924026883419, 0.0], [-0.43641233222678066, 20.554081993833126, 0.0], [-2.5248687191424235, 20.786168411379954, 0.0], [1.9202001335705332, 20.123879305192183, 0.0], [0.22317969987856923, 20.897272682152575, 0.0], [3.2741618943484063, 20.992362180943697, 0.0], [1.5899760199122264, 21.453115468379792, 0.0], [-1.9514410882007236, 20.16427129620529, 0.0], [0.7895544006085445, 21.347707491398307, 0.0], [2.392711661494444, 21.49648759155549, 0.0], [3.4335918920453774, 20.369443005456887, 0.0], [-3.2059618390565356, 19.78470603935285, 0.0], [-3.507664192412976, 20.322603983303612, 0.0], [-2.5903462446898313, 20.27095376147423, 0.0], [-0.5417526429370929, 20.69659410444683, 0.0], [-2.660956570910693, 19.74131637252148, 0.0], [-1.65487381644207, 20.99907310351562, 0.0], [-1.2576991299461444, 19.624152108107143, 0.0], [-1.290418867401, 21.086402340452093, 0.0], [1.760919845369063, 19.301191774189107, 0.0], [-0.2669580986211639, 21.95009118138187, 0.0], [0.6152779483783337, 22.27584988439436, 0.0], [1.6356635493522054, 22.09357275580538, 0.0], [-0.12683317091084786, 21.529648212593195, 0.0], [-0.9003522701933898, 20.430397583714157, 0.0], [-0.47994449436979864, 20.08773438034217, 0.0], [1.7700634169399299, 21.080064027986644, 0.0], [1.7453685607883695, 21.633582488899883, 0.0], [-1.2270744588122806, 19.742747173517465, 0.0], [-2.7875290565775015, 21.033565561936566, 0.0], [-3.2094017202681413, 20.45074748444147, 0.0], [1.5323037000062036, 21.414582122133144, 0.0], [1.1445598543016395, 20.355690164607985, 0.0], [-1.7015006208834942, 19.502770876008118, 0.0], [0.1902119754195592, 20.009314345137863, 0.0], [3.171257812670553, 20.666556562240366, 0.0], [-0.12623711699015042, 20.813866920854384, 0.0], [0.06389271137277329, 20.226655834859482, 0.0], [3.6895814740381714, 21.639718140682902, 0.0], [2.836047359562648, 20.210743442095524, 0.0], [-0.6985171175356548, 21.857589630090654, 0.0], [-1.9610881231072748, 21.75144524722088, 0.0], [2.374776593347048, 21.5006371808274, 0.0], [-1.7539160580097901, 21.084096763735467, 0.0], [2.3383462534025727, 20.589809572266486, 0.0], [-1.7231428813534075, 20.39235693228292, 0.0], [0.6643871500250479, 20.72150553408941, 0.0], [-1.7489754813701308, -9.343270324481349, 1.0], [-0.04213565538452302, -8.817148464474002, 1.0], [-1.7247795760540487, -9.865190487393578, 1.0], [3.4269600390733044, -5.007301868210046, 1.0], [-0.45053560016950195, -9.110568745615478, 1.0], [2.5630311915670325, -7.127743612610488, 1.0], [0.45650751073004087, -9.37001615074873, 1.0], [3.8307696683860124, -3.512824379814831, 1.0], [-0.8038558434130518, -8.862576265279644, 1.0], [3.839748061674205, -5.230988898438189, 1.0], [3.995298349979431, -3.773078195561609, 1.0], [1.8743293295352732, -7.018612913835327, 1.0], [1.6790304759444887, -4.682095058112161, 1.0], [0.975396617109544, -8.770742006481518, 1.0], [2.5203007799174086, -4.487182191475798, 1.0], [-1.0366832567453037, -8.640623233891208, 1.0], [2.7675674875767253, -7.512331845656901, 1.0], [2.1567095490987174, -5.488820433079152, 1.0], [-0.17124632574806764, -6.70580005300497, 1.0], [2.8794114230188166, -4.888493980802016, 1.0], [1.7805707170127585, -10.11296681108429, 1.0], [1.4698802275182759, -6.089117249710057, 1.0], [0.01894674525375297, -10.765955357028984, 1.0], [0.8986151653924184, -8.30526882199613, 1.0], [-0.0262158670911973, -7.938277259510934, 1.0], [-0.6996699302108402, -8.523471286720648, 1.0], [-1.323239877865049, -9.58483472987161, 1.0], [-1.5722022196004783, -10.824521461342977, 1.0], [1.4559690599193686, -8.132384693513735, 1.0], [2.719012833289612, -4.081129907479176, 1.0], [3.207088721368778, -4.556738872477634, 1.0], [3.179603820692596, -4.2820269258360115, 1.0], [2.3471111066602086, -5.250474389449639, 1.0], [0.8857199730596517, -11.456442359795481, 1.0], [3.237965251284467, -7.305778718298106, 1.0], [1.796949162885452, -8.999361165294776, 1.0], [-1.184429218001708, -9.3677071368065, 1.0], [-0.06938016599819702, -6.685519496162987, 1.0], [2.7308563922419458, -6.267516823330135, 1.0], [3.246170279271649, -5.257499718167596, 1.0], [3.3738403075462675, -6.229608233596262, 1.0], [1.0336179946922373, -8.527626339847217, 1.0], [2.366676736344636, -5.324990372138714, 1.0], [3.7940397303566384, -3.5583648030464654, 1.0], [2.9874478933538215, -5.991888669996111, 1.0], [2.402537934426744, -6.43974134011676, 1.0], [2.4816560690610427, -6.419258324861137, 1.0], [0.8209140661365849, -7.517585779078253, 1.0], [3.7078168960737092, -3.324013295236252, 1.0], [2.5285137545181176, -5.952474116099808, 1.0], [-1.9273945487098156, -15.854845435990876, 2.0], [1.7131333064531826, -11.75498895737182, 2.0], [-3.8569839977192952, -15.217732223395728, 2.0], [-1.0238131421425285, -13.615165682613315, 2.0], [-2.1596465235052835, -14.835759343538156, 2.0], [-4.987582683472443, -16.178672854524383, 2.0], [4.385167681987265, -6.635415254310414, 2.0], [-4.802645605033214, -15.503184088288926, 2.0], [-3.701602570472466, -13.804226478120555, 2.0], [-3.641530215531621, -16.31150681178101, 2.0], [-1.9300460356136553, -12.837059978281522, 2.0], [-0.9028217285993516, -12.805251037308826, 2.0], [-2.731579491660306, -14.280219851436932, 2.0], [2.0334200081889726, -11.910141282472718, 2.0], [2.0863581462142946, -12.46020850499863, 2.0], [-1.4887602303144627, -14.616222279989415, 2.0], [-1.508836608405576, -13.557333136873881, 2.0], [-4.57011848692073, -16.825394808254654, 2.0], [-5.408521569992368, -16.198197974990222, 2.0], [0.68278978067497, -11.895959550823516, 2.0], [-3.067908317183387, -15.1509895786097, 2.0], [2.2862484586001095, -11.524132090492596, 2.0], [-5.217334063698853, -16.124148919423135, 2.0], [0.2583685569680733, -11.076708958745266, 2.0], [-2.697410747220064, -15.011868897891814, 2.0], [-4.306268753156651, -15.285582214439476, 2.0], [0.6862832858583151, -10.636660971848828, 2.0], [1.1690863409807752, -10.580930814424553, 2.0], [-1.6563446421282992, -14.06465544726378, 2.0], [-4.439418059805036, -14.843985998613453, 2.0], [-4.7310972572263355, -15.425234441002107, 2.0], [-4.562866026901258, -16.80953743776371, 2.0], [-1.7538433471218424, -14.236187776561648, 2.0], [-0.1291198361266133, -11.143442933235136, 2.0], [0.13744188766450663, -12.882286812958977, 2.0], [-4.6176133683477625, -16.058743615605835, 2.0], [-1.558631215788257, -15.396282618939011, 2.0], [-1.337229651314345, -13.608187172096363, 2.0], [1.4442038876539536, -10.358648340207884, 2.0], [-2.8993910839216177, -14.196700748046787, 2.0], [-2.473260648650548, -14.933596275759431, 2.0], [-2.8099260423285877, -13.52425493211599, 2.0], [1.7131333064531826, -11.75498895737182, 2.0], [-3.012138462073181, -15.485373749764902, 2.0], [-2.460330500737764, -15.540739408560576, 2.0], [-2.48796925431615, -13.690761203591814, 2.0], [0.14871958584492626, -11.673029279338488, 2.0], [-1.7480977034684366, -13.05617841066382, 2.0], [-1.1596575731159977, -15.127641659428493, 2.0], [1.6021452177749673, -11.130155456557695, 2.0]]
        // Add X axis
        var x = d3.scaleLinear()
            .domain([-10, 10])
            .range([0, width]);
        svg2.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x));

        // Add Y axis
        var y = d3.scaleLinear()
            .domain([-20, 30])
            .range([height, 0]);
        svg2.append("g")
            .call(d3.axisLeft(y));

        // Add dots
        var zeros = [], ones = [], twos = []
        for (let i = 0; i < data.length; i++) {
            if (data[i][2] === 0) {
                zeros.push(data[i])
            } else if (data[i][2] === 1) {
                ones.push(data[i])
            } else {
                twos.push(data[i])
            }
        }
        svg2.append('g')
            .selectAll("dot")
            .data(zeros)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(7,126,255,0.64)")
        svg2.append('g')
            .selectAll("dot")
            .data(ones)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(246,170,7,0.66)")
        svg2.append('g')
            .selectAll("dot")
            .data(twos)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(28,225,31,0.69)")
        svg2.append("text")
            .attr("x", (width / 1.5))
            .attr("y", 0 - (margin.top / 2))
            .attr("text-anchor", "middle")
            .style("font-size", "16px")
            .text("TSNE");

        calc = new Calc(zeros, ones, twos)
        calc.vter()
        calc.outter()
        calc.intrer()
        document.getElementById("d11").innerText = calc.intra1
        document.getElementById("d21").innerText = calc.intra2
        document.getElementById("d31").innerText = calc.intra3
        document.getElementById("d12").innerText = calc.out1
        document.getElementById("d22").innerText = calc.out2
        document.getElementById("d32").innerText = calc.out3
        document.getElementById("d41").innerText = (calc.intra1 + calc.intra2 + calc.intra3) / 3
        document.getElementById("d42").innerText = (calc.out1 + calc.out2 + calc.out3) / 3
        if (calc_umap !== undefined) {
            let dd = document.getElementById("d42").innerText
            let ud = document.getElementById("u42").innerText
            let x = Math.abs(dd - ud) / (Math.max(dd, ud))
            document.getElementById("z11").innerText = x

            let dd2 = document.getElementById("d41").innerText
            let ud2 = document.getElementById("u41").innerText
            let x2 = Math.abs(dd2 - ud2) / (Math.max(dd2, ud2))
            document.getElementById("z21").innerText = x2

            document.getElementById("z12").innerText = Math.max(Number(document.getElementById("u42").innerText), Number(document.getElementById("d42").innerText))
            document.getElementById("z22").innerText = Math.min(Number(document.getElementById("u41").innerText), Number(document.getElementById("d41").innerText))
        }


        data = [[20.515281677246094, 8.747917175292969, 0.0], [18.16803550720215, 8.442636489868164, 0.0], [18.651525497436523, 9.002229690551758, 0.0], [18.355806350708008, 8.862788200378418, 0.0], [20.106204986572266, 8.723332405090332, 0.0], [20.770885467529297, 7.576908111572266, 0.0], [18.95855712890625, 9.138911247253418, 0.0], [19.72090721130371, 8.5170259475708, 0.0], [18.249568939208984, 9.143961906433105, 0.0], [18.49732780456543, 8.396270751953125, 0.0], [20.987998962402344, 7.716835021972656, 0.0], [19.314382553100586, 8.604988098144531, 0.0], [18.326309204101562, 8.47277545928955, 0.0], [18.112998962402344, 9.186103820800781, 0.0], [21.291465759277344, 7.295566558837891, 0.0], [20.954992294311523, 7.128696918487549, 0.0], [21.034122467041016, 7.470582008361816, 0.0], [20.35025405883789, 8.557515144348145, 0.0], [21.087844848632812, 7.596638202667236, 0.0], [20.537067413330078, 7.559415340423584, 0.0], [20.931812286376953, 8.231472969055176, 0.0], [20.490137100219727, 7.849150657653809, 0.0], [19.12952995300293, 9.09248161315918, 0.0], [20.034915924072266, 8.167993545532227, 0.0], [19.09812355041504, 8.344586372375488, 0.0], [18.2778377532959, 8.517022132873535, 0.0], [19.967626571655273, 8.279845237731934, 0.0], [20.63369369506836, 8.324200630187988, 0.0], [20.54390525817871, 8.525307655334473, 0.0], [18.650087356567383, 8.778903007507324, 0.0], [18.51133155822754, 8.595105171203613, 0.0], [20.918947219848633, 8.300320625305176, 0.0], [20.756973266601562, 7.259399890899658, 0.0], [21.10074806213379, 7.245269775390625, 0.0], [18.463069915771484, 8.27864933013916, 0.0], [19.20014762878418, 8.544888496398926, 0.0], [21.049190521240234, 8.09766674041748, 0.0], [20.020822525024414, 8.769206047058105, 0.0], [18.266172409057617, 9.176695823669434, 0.0], [20.31598663330078, 8.582079887390137, 0.0], [20.262304306030273, 8.585065841674805, 0.0], [18.150144577026367, 9.022977828979492, 0.0], [18.38104820251465, 9.338171005249023, 0.0], [20.099454879760742, 8.15316104888916, 0.0], [20.512176513671875, 7.587701320648193, 0.0], [18.32501792907715, 8.501707077026367, 0.0], [20.6287841796875, 7.522248268127441, 0.0], [18.57849884033203, 9.07245922088623, 0.0], [20.969396591186523, 7.78648042678833, 0.0], [19.585905075073242, 8.536215782165527, 0.0], [-3.52268648147583, 6.987181186676025, 1.0], [-2.6981685161590576, 6.562195777893066, 1.0], [-3.6359424591064453, 6.865597724914551, 1.0], [0.012391033582389355, 7.307873725891113, 1.0], [-3.1474668979644775, 6.520204067230225, 1.0], [-1.0947047472000122, 6.491094589233398, 1.0], [-2.7836360931396484, 6.280104637145996, 1.0], [0.29676520824432373, 6.933651447296143, 1.0], [-3.2260055541992188, 6.758078098297119, 1.0], [-0.18137337267398834, 6.736758708953857, 1.0], [0.2165493220090866, 7.0520219802856445, 1.0], [-1.3342962265014648, 6.639544486999512, 1.0], [-0.2310487926006317, 7.383256912231445, 1.0], [-2.3627068996429443, 5.933732986450195, 1.0], [0.11150341480970383, 7.517087459564209, 1.0], [-3.2359609603881836, 6.777256965637207, 1.0], [-1.098807692527771, 6.320992469787598, 1.0], [-0.5358543395996094, 7.176936626434326, 1.0], [-3.070901870727539, 5.782853603363037, 1.0], [-0.09063001722097397, 7.389698028564453, 1.0], [-2.9258482456207275, 5.043410301208496, 1.0], [-1.0014151334762573, 7.120558261871338, 1.0], [-3.8555262088775635, 5.426070690155029, 1.0], [-2.4532551765441895, 6.239234924316406, 1.0], [-2.7811925411224365, 6.6984663009643555, 1.0], [-3.029783010482788, 6.761425018310547, 1.0], [-3.443321466445923, 6.769118309020996, 1.0], [-3.9966330528259277, 6.6467461585998535, 1.0], [-2.0269761085510254, 6.147789001464844, 1.0], [0.29197680950164795, 7.409118175506592, 1.0], [0.2946544885635376, 7.2600226402282715, 1.0], [0.07602612674236298, 7.311732292175293, 1.0], [-0.4259781241416931, 7.341611862182617, 1.0], [-3.656904697418213, 4.911830425262451, 1.0], [-0.9294123649597168, 6.28455924987793, 1.0], [-2.443317413330078, 5.942187309265137, 1.0], [-3.5002269744873047, 6.853800296783447, 1.0], [-2.7006399631500244, 6.093318462371826, 1.0], [-0.8415516018867493, 6.574051856994629, 1.0], [-0.08064643293619156, 6.987681865692139, 1.0], [-0.6214879751205444, 6.7481584548950195, 1.0], [-2.2971341609954834, 6.233575820922852, 1.0], [-0.3535127341747284, 7.371809482574463, 1.0], [0.33598557114601135, 6.929895877838135, 1.0], [-0.6355006098747253, 6.736735820770264, 1.0], [-0.8931207060813904, 6.825416564941406, 1.0], [-0.9474117159843445, 6.666807174682617, 1.0], [-2.1826069355010986, 6.485919952392578, 1.0], [0.3494744300842285, 6.905064105987549, 1.0], [-0.627865195274353, 6.852048873901367, 1.0], [-7.356034278869629, 5.6545820236206055, 2.0], [-3.299776315689087, 4.559148788452148, 2.0], [-8.19030475616455, 5.51005744934082, 2.0], [-6.307520389556885, 5.724086284637451, 2.0], [-7.105269908905029, 5.562047958374023, 2.0], [-9.038021087646484, 6.008450508117676, 2.0], [-0.5562019944190979, 6.405793190002441, 2.0], [-8.853774070739746, 5.810373783111572, 2.0], [-6.664422512054443, 5.470422267913818, 2.0], [-8.227241516113281, 5.654362201690674, 2.0], [-6.3752121925354, 5.055812358856201, 2.0], [-6.07235860824585, 5.512881755828857, 2.0], [-7.316959857940674, 5.08731746673584, 2.0], [-3.4199185371398926, 4.315682888031006, 2.0], [-3.324624538421631, 4.394382953643799, 2.0], [-6.762986183166504, 5.249067306518555, 2.0], [-6.41609001159668, 5.550407886505127, 2.0], [-8.607765197753906, 6.056736469268799, 2.0], [-8.96451473236084, 6.1618218421936035, 2.0], [-3.670863628387451, 5.359371662139893, 2.0], [-7.957729816436768, 5.4737548828125, 2.0], [-3.220700979232788, 4.446409702301025, 2.0], [-8.9326753616333, 6.143351078033447, 2.0], [-3.6872551441192627, 5.188967704772949, 2.0], [-7.676700592041016, 5.256218433380127, 2.0], [-8.575790405273438, 5.600922107696533, 2.0], [-3.317772626876831, 5.183640956878662, 2.0], [-3.174031972885132, 5.028151035308838, 2.0], [-6.76192045211792, 5.4846391677856445, 2.0], [-8.59329891204834, 5.606488227844238, 2.0], [-8.896925926208496, 5.739468097686768, 2.0], [-8.72806453704834, 5.953456878662109, 2.0], [-6.658232688903809, 5.601463794708252, 2.0], [-3.8929073810577393, 5.338142395019531, 2.0], [-4.324520587921143, 5.150786876678467, 2.0], [-8.790935516357422, 5.9212751388549805, 2.0], [-7.202373504638672, 5.629904747009277, 2.0], [-6.262340068817139, 5.456859588623047, 2.0], [-3.083956241607666, 5.055129051208496, 2.0], [-7.329063415527344, 5.049733638763428, 2.0], [-7.579118728637695, 5.3531389236450195, 2.0], [-7.124722480773926, 5.049290657043457, 2.0], [-3.365809440612793, 4.5218634605407715, 2.0], [-7.997356414794922, 5.5499114990234375, 2.0], [-7.727227687835693, 5.4533257484436035, 2.0], [-6.95993185043335, 5.12614107131958, 2.0], [-3.9157474040985107, 5.209775447845459, 2.0], [-6.3503098487854, 5.158710479736328, 2.0], [-6.97205924987793, 5.557412624359131, 2.0], [-3.2093920707702637, 4.825197696685791, 2.0]]
        // Add X axis
        x = d3.scaleLinear()
            .domain([-10, 20])
            .range([0, width]);
        svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x));

        // Add Y axis
        y = d3.scaleLinear()
            .domain([4, 10])
            .range([height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));

        // Add dots
        zeros = [], ones = [], twos = []
        for (let i = 0; i < data.length; i++) {
            if (data[i][2] === 0.0) {
                zeros.push(data[i])
            } else if (data[i][2] === 1.0) {
                ones.push(data[i])
            } else {
                twos.push(data[i])
            }
        }
        svg.append('g')
            .selectAll("dot")
            .data(zeros)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(7,126,255,0.64)")
        svg.append('g')
            .selectAll("dot")
            .data(ones)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(246,170,7,0.66)")
        svg.append('g')
            .selectAll("dot")
            .data(twos)
            .enter()
            .append("circle")
            .attr("cx", function (d) {
                return x(d[0]);
            })
            .attr("cy", function (d) { return y(d[1]); })
            .attr("r", 3)
            .style("fill", "rgba(28,225,31,0.69)")
        svg.append("text")
            .attr("x", (width / 1.5))
            .attr("y", 0 - (margin.top / 2))
            .attr("text-anchor", "middle")
            .style("font-size", "16px")
            .text("UMAP");

        calc_umap = new Calc(zeros, ones, twos)
        calc_umap.vter()
        calc_umap.outter()
        calc_umap.intrer()
        console.log("calc, ", calc)
        console.log("calc_umap, ", calc_umap)

        document.getElementById("u11").innerText = calc_umap.intra1
        document.getElementById("u21").innerText = calc_umap.intra2
        document.getElementById("u31").innerText = calc_umap.intra3
        document.getElementById("u12").innerText = calc_umap.out1
        document.getElementById("u22").innerText = calc_umap.out2
        document.getElementById("u32").innerText = calc_umap.out3
        document.getElementById("u41").innerText = (calc_umap.intra1 + calc_umap.intra2 + calc_umap.intra3) / 3
        document.getElementById("u42").innerText = (calc_umap.out1 + calc_umap.out2 + calc_umap.out3) / 3

        if (calc !== undefined) {
            let dd = document.getElementById("d42").innerText
            let ud = document.getElementById("u42").innerText
            let x = Math.abs(dd - ud) / (Math.max(dd, ud))
            document.getElementById("z11").innerText = x

            let dd2 = document.getElementById("d41").innerText
            let ud2 = document.getElementById("u41").innerText
            let x2 = Math.abs(dd2 - ud2) / (Math.max(dd2, ud2))
            document.getElementById("z21").innerText = x2

            document.getElementById("z12").innerText = Math.max(Number(document.getElementById("u42").innerText), Number(document.getElementById("d42").innerText))
            document.getElementById("z22").innerText = Math.min(Number(document.getElementById("u41").innerText), Number(document.getElementById("d41").innerText))
        }



    </script>

</body>
</html>